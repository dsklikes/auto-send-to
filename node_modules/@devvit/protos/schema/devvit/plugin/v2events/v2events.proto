syntax = "proto3";

package devvit.plugin.v2events;

import "google/protobuf/descriptor.proto";

option go_package = "github.snooguts.net/reddit/reddit-devplatform-monorepo/go-common/generated/protos/types/devvit/plugin/v2events";
option java_outer_classname = "_V2Events";
option java_package = "com.reddit.devvit.plugin.v2events";

extend google.protobuf.MessageOptions {
  optional string source = 51234; // denotes the v2 event "source" field
  optional string action = 51235; // denotes the v2 event "action" field
  optional string noun = 51236; // denotes the v2 event "noun" field
}

message V2EventsActionInfo {
  string page_type = 1;
  string pane_name = 2;
}

message V2EventsPostGuidanceCreate {
  option (source) = "moderator";
  option (action) = "save";
  option (noun) = "post_guidance";
  V2EventsActionInfo action_info = 1;
}

message V2EventsPostGuidanceUpdate {
  option (source) = "moderator";
  option (action) = "edit";
  option (noun) = "post_guidance";
  V2EventsActionInfo action_info = 1;
}

message V2EventsPublishRequest {
  oneof data {
    V2EventsPostGuidanceCreate post_guidance_create = 1;
    V2EventsPostGuidanceUpdate post_guidance_update = 2;
  }
}

// Generic response interface
message V2EventsPublishResponse {}

// The Events plugin allows an app to emit pre-defined v2 events
service V2Events {
  rpc Publish(V2EventsPublishRequest) returns (V2EventsPublishResponse);
}
