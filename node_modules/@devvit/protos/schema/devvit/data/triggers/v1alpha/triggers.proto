syntax = "proto3";

package devvit.data.triggers.v1alpha;

import "devvit/events/v1alpha/events.proto";
import "google/protobuf/timestamp.proto";

option go_package = "github.snooguts.net/reddit/reddit-devplatform-monorepo/go-common/generated/protos/types/devvit/data/triggers/v1alpha";

message TriggerEvent {
  string id = 1; // UUID for the event
  google.protobuf.Timestamp timestamp = 2; // Event timestamp

  string subreddit = 3;

  // TODO: What other header fields do we need?
  //       Anything for logging / observability?
  // TODO: Analyze real world events for each trigger type to
  //       identify potentially useful fields

  oneof type {
    devvit.events.v1alpha.PostSubmit post_submit = 100;
    devvit.events.v1alpha.PostUpdate post_update = 101;
    devvit.events.v1alpha.PostReport post_report = 102;

    devvit.events.v1alpha.CommentSubmit comment_submit = 103;
    devvit.events.v1alpha.CommentUpdate comment_update = 104;
    devvit.events.v1alpha.CommentReport comment_report = 105;

    devvit.events.v1alpha.SubredditSubscribe subreddit_subscribe = 106;

    devvit.events.v1alpha.AppInstall app_install = 107;
    devvit.events.v1alpha.AppUpgrade app_upgrade = 108;
  }
}
